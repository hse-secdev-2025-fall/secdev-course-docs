# Требования к проекту - спецификация (минимум) - HSE SecDev 2025

## 1. Цель и модель курса
- Один приватный репозиторий на студента через Classroom (assignment `course-project`).
- Все практики (P01…P14) - ветки `pXX-*` и PR → merge → тег `PXX`.

## 2. Минимальный функционал (MVP)
- **Аутентификация**: регистрация, логин, refresh (по желанию), logout.
- **Роли**: `user` (по умолчанию), `admin` (доступ только к административным операциям).
- **Ресурс**: `items` (или иной доменный объект), CRUD через REST:
  - `POST /api/v1/items`
  - `GET /api/v1/items/<built-in function id>`
  - `GET /api/v1/items?limit=&offset=`
  - `PATCH /api/v1/items/<built-in function id>`
  - `DELETE /api/v1/items/<built-in function id>`
- **Владение**: каждый `item` имеет `owner_id`; доступ на чтение/изменение **только владельцу** (или роли `admin`).

## 3. Общие контрактные требования
- Ответы и ошибки - **структурированные**:
```json
{ "code": "VALIDATION_ERROR", "message": "...", "details": {} }
```
- Валидация входных данных; HTTP-коды соответствуют RFC (2xx/4xx/5xx).
- Пагинация (limit/offset), сортировка (опц.), фильтрация (опц.).
- Идемпотентность для безопасных операций (GET/HEAD), корректная обработка повторов.

## 4. Нефункциональные требования (выжимка)
- Репо-гигиена (P01), тесты (позитив/негатив), линтеры, форматирование, **зелёный CI**.
- Безопасность запросов: отсутствует IDOR, защита от типовых ошибок (валидация, обработка исключений).
- Логи в формате «одна запись на запрос» с `request_id` (к P13).
- Документация: README (запуск/тесты/FAQ), SECURITY (приватный контакт).

## 5. Техническая база (рекомендации)
- Python 3.12, `pytest`, `ruff/black/isort`, `pre-commit`.
- Структура:
```
src/
  app/            # HTTP API / FastAPI/Flask (на выбор)
  domain/         # модели/правила
  services/       # бизнес-логика
  adapters/       # доступ к БД/внешним API
tests/
.github/workflows/ci.yml
```

## 6. Критерии приёмки MVP
- Запуск локально по README; все тесты проходят.
- Эндпоинты CRUD работают; доступ ограничен владельцем.
- PR по шаблону; CI зелёный; чек-лист практики выполнен.
- Тег `PXX` после merge.

## 7. Дальнейшее развитие (к P02…P14)
- NFR, ADR, Threat Model, Containerization, CI/CD, SBOM, SAST, DAST, Hardening, Logging & Alerts, DPIA.
