# Инструкция для студента (P05 — Secure Coding & ADR)

## 1) Ветка и структура
1. От `main` создайте ветку `p05-secure-coding`.
2. Добавьте каталог `docs/adr/` и создайте **минимум 3 ADR**:
   - `ADR-001-<topic>.md`
   - `ADR-002-<topic>.md`
   - `ADR-003-<topic>.md`
3. Внесите изменения в код (`src/...`) и тесты (`tests/...`).

## 2) Рекомендуемые темы ADR (выберите ≥3)
- **Валидация ввода и загрузок**: проверка magic bytes, лимиты размера/времени, канонизация путей, запрет симлинков, имя файла — UUID.
- **Ошибки в формате RFC 7807**: маскирование деталей, `correlation_id`, карты ошибок.
- **Лимиты/таймауты/ретраи** для исходящих HTTP-запросов (client policies).
- **Секреты**: откуда берём (переменные окружения/хранилище), ротация, запрет в коде/логах.
- **Нормализация дат/денег**: UTC, Decimal, локаль; предотвращение float-ошибок.
- **Rate limiting / защита /login** (если релевантно вашему сервису).

## 3) Связи с предыдущими практиками
- В секции **Links** каждого ADR укажите: `NFR-xx` (из P03), `F#`/`R#` (из P04), и ссылку на тест/проверку.
- Если ADR закрывает риск из `RISKS.md`, добавьте критерий закрытия (как проверяем).

## 4) Тесты
- Добавьте **3–5 тестов**, в том числе **негативные** (большой файл, неверная сигнатура, попытка traversal, неверный MIME и т.п.).
- Для ошибок ожидайте **RFC 7807 JSON** (тип/заголовок/статус/деталь/`correlation_id`).

## 5) PR и ревью
- Откройте PR `p05-secure-coding → main` по шаблону; приложите ссылки на ADR и ключевые изменения.
- Добейтесь зелёного CI (линтеры/тесты); ответьте на комментарии.

## Что сдаём в PR
- Ссылки на `docs/adr/ADR-*.md`.
- Диффы `src/…` и `tests/…`.
- Скрин/ссылка на CI: ✅ Passed.
