# P09 — Чек-лист сдачи и критерии (0/★1/★★2)

**Как читаем баллы по каждому пункту:**

- **0** — не выполнено или выполнено с серьёзными ошибками.
- **★ 1 (базовый)** — минимально рабочая реализация по инструкции.
- **★★ 2 (продвинутый)** — аккуратная интеграция в проект, осознанное использование результатов, связь с политикой.

---

## C1. SBOM — покрытие и автоматизация

- **0** — SBOM отсутствует или генерируется вручную/локально без фиксации в репозитории/CI.
- **★ 1** — есть шаг CI, который автоматически генерирует SBOM (Syft/Trivy) при `push`/`workflow_dispatch`; результат хранится в `EVIDENCE/P09/sbom.json` и доступен через артефакты Actions.
- **★★ 2** — SBOM формируется стабильно (фиксирована версия инструмента или образа), структура `EVIDENCE/P09/` описана в PR/README; SBOM привязан к конкретным коммитам/релизам (есть ссылка на job/commit).

---

## C2. SCA — отчёт и сводка по уязвимостям

- **0** — SCA не выполняется либо отчёт недоступен/битый.
- **★ 1** — есть шаг CI, который запускает SCA (Grype/Trivy/pip-audit/safety) на основе SBOM или зависимостей; отчёт `EVIDENCE/P09/sca_report.json` присутствует; есть `sca_summary.md` с агрегированной сводкой по severity.
- **★★ 2** — в `sca_summary.md` или описании PR кратко перечислены ключевые находки (Critical/High), есть намётки плана действий (обновление/исключения); при повторном прогоне отчёты воспроизводимы.

---

## C3. Артефакты и трассировка (Evidence & DS1)

- **0** — артефакты разбросаны/отсутствуют; непонятно, какой файл к какому прогону относится.
- **★ 1** — в `EVIDENCE/P09/` лежат минимум:
  - `sbom.json`,
  - `sca_report.json`,
  - `sca_summary.md`;  
  в описании PR есть явные ссылки/упоминания этих файлов и успешного job.
- **★★ 2** — дополнительно:
  - указано, как использовать эти артефакты в дальнейшем (например, для DS-раздела итогового отчёта),
  - структура `EVIDENCE/` не конфликтует с другими практиками и описана в PR/документации.

---

## C4. Политика и waivers

- **0** — файл `policy/waivers.yml` отсутствует, политика работы с уязвимостями не описана.
- **★ 1** — есть `policy/waivers.yml` с хотя бы одной заготовкой (структура полей), в PR кратко описано, как вы планируете использовать waivers, опираясь на `project/69_sbom-vuln-mgmt.md`.
- **★★ 2** — есть минимум один осознанный waiver или реальный фикс:
  - либо продемонстрирован фикс уязвимости (обновление зависимости/кода) с ссылкой на diff,
  - либо оформлен waiver с обоснованием, ссылкой на Issue/PR и сроком пересмотра;  
  в PR это прозрачно объяснено.

---

## C5. Интеграция в CI и гигиена

- **0** — workflow нестабилен (падает по второстепенным причинам), триггеры выбраны случайно, есть лишние права/секреты.
- **★ 1** — workflow:
  - триггерится на `push`/`workflow_dispatch` по релевантным путям,
  - использует разумные таймауты,
  - не трогает секреты (работает только с публичными образами и локальным кодом),
  - загружает артефакты через `upload-artifact`.
- **★★ 2** — дополнительно:
  - задан `concurrency` (чтобы не застревали старые запуски),
  - workflow вписан в общую картину CI/CD (описан в PR, не конфликтует с `ci.yml` из P08),
  - при желании — добавлен в protected-rules как рекомендованный check.

---
