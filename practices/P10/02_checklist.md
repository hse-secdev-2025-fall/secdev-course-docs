# P10 — Чек-лист сдачи и критерии (0/★1/★★2)

**Шкала:**

- **0** — не выполнено / сломано;
- **★ 1 (базовый)** — выполнено по инструкции, отчёты есть, но без глубокой настройки;
- **★★ 2 (проектный)** — интегрировано в ваш реальный сервис с осмысленной настройкой и триажем.

---

## C1. Настройка SAST (Semgrep, SARIF)

**0:** Semgrep не запускается, отчёт не создаётся или отсутствует в `EVIDENCE/P10/`.  

**★ 1:**  

- Semgrep запускается из CI (docker или `pip install`),  
- используется хотя бы профиль `p/ci`,  
- отчёт в формате SARIF сохраняется в `EVIDENCE/P10/semgrep.sarif`.  

**★★ 2:**  

- дополнительно подключены свои правила в `security/semgrep/rules.yml` (под ваш проект),  
- в описании PR или отдельной заметке кратко перечислены ключевые findings (если есть) и план действий.

---

## C2. Сканирование секретов (Gitleaks)

**0:** Gitleaks не запускается или отчёт не сохраняется.  

**★ 1:**  

- Gitleaks запускается в CI как отдельный шаг workflow,  
- используется конфиг `security/.gitleaks.toml`,  
- отчёт сохраняется в `EVIDENCE/P10/gitleaks.json`.  

**★★ 2:**  

- хотя бы один ложноположительный срабатывающий шаблон вынесен в allowlist `.gitleaks.toml` с понятным комментарием,  
- в PR объяснено, какие типы секретов вы считаете критичными и как будете с ними работать.

---

## C3. Артефакты и документация

**0:** `EVIDENCE/P10/` отсутствует или содержит мусор/старые файлы, привязка к актуальному запуску не ясна.  

**★ 1:**  

- в `EVIDENCE/P10/` лежат минимум:
  - `semgrep.sarif`,
  - `gitleaks.json`;  
- в PR есть ссылка на успешный job с этими артефактами.  

**★★ 2:**  

- добавлен краткий summary (`sast_summary.md` или блок в PR/DS),
- указано, как результаты P10 будут использоваться дальше (например, как часть итогового отчёта или DS-раздела).

---

## C4. Триаж и работа с findings

**0:** Отчёты есть, но их никто не смотрел: ни одного комментария/решения по findings.  

**★ 1:**  


- в PR или отдельном файле кратко зафиксировано:
  - сколько проблем нашёл Semgrep (по severity),
  - есть ли реальные секреты по Gitleaks,
  - какие из них требуют действий.  

**★★ 2:**  

  - хотя бы одно реальное замечание **исправлено** (обновлён код/конфиг) **или**:
  - создана Issue/задача с ссылкой на отчёт,
  - описано, почему это откладывается (backlog) и на какой этап.

---

## C5. Интеграция в CI и гигиена

**0:** Workflow нестабилен, ломает существующий CI, триггеры выбраны случайно, есть лишние права или утечки секретов в логах.  

**★ 1:**  

- workflow:
  - триггерится на `push`/`workflow_dispatch` по релевантным путям (код + security-конфиги),
  - не запрашивает лишних permissions (достаточно `contents: read`),
  - использует разумные таймауты и `|| true` для того, чтобы findings не рушили разработку мгновенно.  

**★★ 2:**  

- используется `concurrency`, чтобы не копить висящие запуски,  
- workflow вписан в общую схему CI (не конфликтует с P08/P09),  
- опционально: настроена интеграция SARIF с GitHub Code Scanning или аналогичным инструментом (как минимум — есть план, описанный в PR).

---
