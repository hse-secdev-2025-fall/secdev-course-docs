# Сниппеты — P03 (Security NFR)

## 1) Шаблон строки в `NFR.md`
```
| ID     | Название                 | Описание                                  | Метрика/Порог                 | Проверка (чем/где)                 | Компонент | Приоритет |
|--------|--------------------------|-------------------------------------------|-------------------------------|------------------------------------|-----------|-----------|
| NFR-01 | Хранение паролей         | Хэширование только Argon2id                | t=3, m=256MB, p=1             | Конфиг + unit-тест                  | auth      | High      |
| NFR-02 | Ошибки в формате RFC7807 | Маскирование PII; correlation_id           | 100% endpoint’ов              | Контракт-тесты + e2e               | api       | Medium    |
| NFR-03 | Порог p95 /login         | p95 ≤ 300 ms при 50 RPS на stage          | p95 ≤ 300 ms @ 50 RPS         | Нагрузочный тест                    | auth      | High      |
| NFR-04 | Уязвимости зависимостей  | High/Critical ≤ 7 дней до устранения      | ≤ 7 дней                      | CI-отчёт SCA/SBOM                   | build     | High      |
| NFR-05 | Ротация секретов         | Регламент и автоматизация ротации         | Раз в 30 дней (пример)        | Vault/KMS политика + журнал        | platform  | Medium    |
```
(Пример — адаптируйте под свой домен.)

## 2) Gherkin (BDD) пример в `NFR_BDD.md`
```
Feature: Производительность логина
  Scenario: p95 логина держится под порогом на stage
    Given сервис развернут на stage и нагрузка 50 RPS
    When запускается 5-минутный нагрузочный тест
    Then p95 времени ответа для POST /login ≤ 300 ms
```

## 3) Трассировка в `NFR_TRACEABILITY.md`
```
| NFR ID | Story/Task                     | Приоритет | Release/Milestone |
|--------|--------------------------------|-----------|-------------------|
| NFR-01 | AUTH-12: Реализация Argon2id   | High      | 2025.10           |
| NFR-03 | PERF-07: Нагрузочный тест login| High      | 2025.10           |
```
