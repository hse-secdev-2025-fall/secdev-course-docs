# P06 — Чек-лист сдачи и критерии (0/★1/★★2)

**Шкала:**
- **0** — не выполнено/ошибки;
- **★ 1 (базовый)** — выполнено по инструкции на учебном шаблоне;
- **★★ 2 (проектный)** — выполнено на **своём** сервисе/домене.

---

## C1. Исправление уязвимости
**0:** Фикс отсутствует или некорректный.  
**★ 1:** Исправлен XSS/SQLi/Path Traversal/… по учебному заданию.  
**★★ 2:** Исправлен реальный дефект в своём модуле (например, небезопасная сериализация, неверная работа с cookie).  

**Доказательства:** Diff кода (до/после), CI-тесты проходят.  
**Баллы:** 0…2; **LO:** RO5

---

## C2. Тесты (вкл. негативные)
**0:** Тестов нет или только позитивные.  
**★ 1:** Есть ≥6 тестов, включая негативные (проверка некорректных данных, граничные значения).  
**★★ 2:** Тесты покрывают доменный сценарий своего кода, включая злоупотребления (например, «атака длинной строкой», «SQL-инъекция в поле фильтра»).  

**Доказательства:** `pytest` отчёт с покрытием; файлы `tests/test_fix_*.py`.  
**Баллы:** 0…2; **LO:** RO5

---

## C3. Валидация/ошибки/логирование
**0:** Нет валидации, ошибки отображаются небезопасно, PII не маскируется.  
**★ 1:** Добавлена валидация входных данных; корректные ответы (400/422), логирование без чувствительных данных.  
**★★ 2:** Валидация адаптирована к доменным полям; PII маскируется; в логах только безопасная диагностическая информация.  

**Доказательства:** Код валидации, примеры логов, тесты на ошибки.  
**Баллы:** 0…2; **LO:** RO5

---

## C4. Линт/формат/quality gate
**0:** Линтеры/форматтеры падают, стиль не соблюдён.  
**★ 1:** `ruff`, `black`, `isort` проходят; CI блокирует merge при ошибках.  
**★★ 2:** Настроены дополнительные правила под свой стек (например, `mypy`, `flake8-bugbear`, `bandit`); quality gate на CI (coverage ≥ 80%).  

**Доказательства:** CI run (скрин или лог) + конфиг `.ruff.toml`, `pyproject.toml`.  
**Баллы:** 0…2; **LO:** RO5

---

## C5. Интеграция в модуль проекта
**0:** Фикс изолирован, не интегрирован в кодовую базу.  
**★ 1:** Фикс сделан в учебном примере.  
**★★ 2:** Фикс и тесты интегрированы в рабочий модуль своего сервиса; есть привязка к Issue/истории.  

**Доказательства:** PR в свой репозиторий + ссылка на Issue.  
**Баллы:** 0…2; **LO:** RO5

---

## Что сдаём в PR
- Diff кода с исправлением уязвимости.  
- Тесты (`pytest`), включая негативные сценарии.  
- Скрины/логи валидации и логирования (без PII).  
- Логи CI (линтеры, форматтеры, тесты зелёные).  
- PR с привязкой к Issue/истории.  
- CI зелёный, шаблон PR заполнен.
