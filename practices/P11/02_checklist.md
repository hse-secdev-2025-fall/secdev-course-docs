# P11 — Чек-лист сдачи и критерии (0/★1/★★2)

**Шкала:**

- **0** — не выполнено / сломано;
- **★ 1 (базовый)** — выполнено по инструкции, ZAP baseline запускается и даёт отчёты;
- **★★ 2 (расширенный)** — DAST осмысленно интегрирован в CI и используется для реальных улучшений.

---

## C1. Запуск сервиса в CI

**0:**  
Приложение не поднимается на раннере, health-чек не проходит, job падает до ZAP.

**★ 1:**  
В workflow есть шаг, который поднимает реальный сервис проекта (FastAPI/Flask/другое) на `localhost:<PORT>`; есть ожидание готовности (curl/loop), ZAP до него «достукивается».

**★★ 2:**  
Сервис поднимается в конфигурации, близкой к реальной (docker/compose, реальные зависимости), а не в сильно упрощённом «пустом» режиме.

---

## C2. Запуск ZAP baseline

**0:**  
ZAP baseline не запускается или конфигурирован на несуществующий URL (ошибки `Target unreachable`, отчётов нет).

**★ 1:**  
ZAP baseline отрабатывает против указанного таргета; job завершается успешно (даже если есть найденные алерты), предупреждения выводятся в лог.

**★★ 2:**  
Настройки ZAP адаптированы под сервис (например, корректный base URL, отключены явно нерелевантные проверки, при необходимости увеличено время ожидания); при повторном запуске поведение предсказуемо.

---

## C3. Артефакты в `EVIDENCE/P11/`

**0:**  
В `EVIDENCE/P11/` нет отчётов ZAP или они не соответствуют последнему запуску CI.

**★ 1:**  
В репозитории (и/или артефактах Actions) есть:

- `EVIDENCE/P11/zap_baseline.html`,
- `EVIDENCE/P11/zap_baseline.json`.

Файлы читаются, отчёт явно относится к вашему сервису.

**★★ 2:**  
Дополнительно:

- в PR есть прямая ссылка на HTML-отчёт (например, через raw/artefact),
- структура `EVIDENCE/P11/` аккуратно вписана в общий каталог `EVIDENCE/` (без дублирования чужих/старых отчётов).

---

## C4. Интерпретация результатов

**0:**  
Никаких комментариев по результатам: непонятно, смотрел ли кто-то на отчёт.

**★ 1:**  
В описании PR есть краткое резюме:

- сколько алертов по уровням (High/Medium/Low);
- есть ли реально значимые проблемы или всё похоже на информационный шум.

**★★ 2:**  
Выбрано 1–2 алерта, по которым:

- либо внесён фикс (есть ссылка на коммит/PR и повторный отчёт),
- либо явно написано, почему риск сейчас принимается (с учётом контекста проекта).

---

## C5. Интеграция в CI

**0:**  
DAST запускается только локально/разово; workflow либо отсутствует, либо сломан.

**★ 1:**  
Есть `.github/workflows/ci-p11-dast.yml`:

- разумные триггеры (`workflow_dispatch` и/или `push` по релевантным путям),
- нет лишних permissions,
- job отрабатывает зелёным.

**★★ 2:**  
Workflow вписан в общую картину CI:

- аккуратно настроен `concurrency` (не копятся висящие запуски),
- при необходимости — добавлены лёгкие ограничения (например, запуск по метке/ветке релиза), описанные в PR или README.

---
