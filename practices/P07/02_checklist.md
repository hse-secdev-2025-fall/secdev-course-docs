# P07 — Чек-лист сдачи и критерии (0/★1/★★2)

**Шкала:**
- **0** — не выполнено/ошибки;
- **★ 1 (базовый)** — выполнено по инструкции на учебном шаблоне;
- **★★ 2 (проектный)** — выполнено на **своём** сервисе/домене.

---

## C1. Dockerfile (multi-stage, размер)
**0:** Один слой/огромный образ, нет оптимизации.  
**★ 1:** Используется multi-stage build; удалены временные зависимости; размер образа уменьшен (проверка `docker history`).  
**★★ 2:** Dockerfile для своего сервиса; образ оптимизирован под продакшн (минимальная база, кэш-слои, без лишних пакетов).  

**Доказательства:** `Dockerfile`, вывод `docker history` и `docker images` (сравнение размеров).  
**Баллы:** 0…2; **LO:** RO3

---

## C2. Безопасность контейнера
**0:** Запуск под root, нет healthcheck.  
**★ 1:** Контейнер запускается под non-root пользователем; есть `HEALTHCHECK`; тома и FS где возможно `read-only`.  
**★★ 2:** Дополнительный hardening: ограничение capabilities, `seccomp`, `no-new-privileges`, AppArmor/SELinux профиль; адаптировано под свой сервис.  

**Доказательства:** Diff Dockerfile/compose; пример `docker inspect`.  
**Баллы:** 0…2; **LO:** RO3

---

## C3. Compose/локальный запуск
**0:** Нет `docker-compose.yml` или сервис не поднимается.  
**★ 1:** `docker compose up` поднимает приложение (шаблон).  
**★★ 2:** Compose описывает зависимости реального приложения (DB, кеш, очередь); можно локально поднять весь стек.  

**Доказательства:** `docker-compose.yml`, скрин/лог успешного запуска.  
**Баллы:** 0…2; **LO:** RO3

---

## C4. Сканирование образа (Trivy/Hadolint)
**0:** Сканирование не настроено; критичные уязвимости не устранены.  
**★ 1:** Сканер (например, `trivy`, `hadolint`) встроен в CI; критичные уязвимости устранены или игнорированы с пояснением.  
**★★ 2:** Настроены свои политики/исключения; регулярный запуск; отчёты сохраняются артефактами CI.  

**Доказательства:** CI-лог/отчёт сканера (`trivy report`, `hadolint`).  
**Баллы:** 0…2; **LO:** RO3

---

## C5. Контейнеризация своего приложения
**0:** Нет привязки к проекту.  
**★ 1:** Запущено шаблонное приложение в контейнере.  
**★★ 2:** Собственный сервис контейнеризирован, запускается через `docker compose`; доступен по HTTP/CLI; есть интеграция с CI/CD.  

**Доказательства:** Репозиторий с Dockerfile и `docker-compose.yml`, ссылка/скрин запуска.  
**Баллы:** 0…2; **LO:** RO3

---

## Что сдаём в PR
- `Dockerfile` с multi-stage build.  
- `docker-compose.yml` для локального запуска.  
- Скрины/логи: `docker history`, `docker images`, успешный `docker compose up`.  
- Отчёт сканера (`trivy`, `hadolint`) из CI.  
- PR с контейнеризацией своего приложения.  
- CI зелёный, шаблон PR заполнен.
