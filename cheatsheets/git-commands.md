# Шпаргалка 1 — Git: команды (что делает и зачем)

## Базовая настройка и клон
```bash
git --version                         # проверить версию
git config --global user.name "Имя"   # имя автора коммитов
git config --global user.email you@example.com
git config --global init.defaultBranch main

git clone <URL>                       # склонировать репозиторий
cd <repo>
git remote -v                         # посмотреть привязанные удалённые репозитории
```

## Ветки и коммиты
```bash
git switch -c p01-setup               # создать и перейти в ветку
git status                            # что изменилось
git add -A                            # добавить все изменения в индекс
git commit -m "feat: сообщение"       # записать коммит
git push -u origin p01-setup          # отправить ветку на сервер
```

## Просмотр и сравнение
```bash
git log --oneline --graph --decorate  # история в одну строку
git show HEAD                         # показать последний коммит
git diff                              # отличия незакоммиченных файлов
git diff --staged                     # отличия подготовленных к коммиту
```

## Исправление и отмена локально
```bash
git restore <file>                    # вернуть рабочую копию к HEAD
git restore --staged <file>           # убрать файл из индекса
git commit --amend                    # поправить последний коммит (сообщение/содержимое)
git reset --hard HEAD~1               # ОСТОРОЖНО: откатить на 1 коммит (потеря локальных изменений)
```

## Синхронизация с сервером
```bash
git fetch                             # забрать обновления без слияния
git pull --rebase                     # забрать и «переиграть» мои коммиты поверх свежего main
git push                              # отправить мои коммиты на сервер
```

## Слияние/ребейз/временное сохранение
```bash
git merge main                        # слить main в текущую ветку
git rebase main                       # «переписать» историю поверх main (аккуратно, только в личных ветках)
git stash                             # убрать незакоммиченные изменения «в карман»
git stash pop                         # вернуть изменения из «кармана»
```

## Теги и релизы
```bash
git tag P01                           # создать тег
git push --tags                       # отправить теги
```

## Отмена уже в истории
```bash
git revert <hash>                     # создать новый «обратный» коммит (без переписывания истории)
```

> **Памятка:** используйте `pull --rebase` и `rebase/amend` только в своих ветках (не в `main`). Для общей истории безопаснее `merge` и `revert`.
